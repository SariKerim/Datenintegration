<!-- views/pages/index.ejs -->

<!DOCTYPE html>
<html lang="en">
<head>
    <% include ../partials/head %>
</head>
<body class="container">

    <header>
        <% include ../partials/header %>
    </header>

    <main>
        <div class="jumbotron">
          <h1>Movies By Genre</h1>
          <table class="table table-hover">
            <tr>
              <th>Genre</th>
              <th>Movie Count</th>
              <th>Average Rating</th>
              <th>Average Budget</th>
              <th>Average Revenue</th>
            </tr>
            <% stats.forEach(function(stat) {%>
              <tr>
                <td>
                  <% if(stat._id == null) { %>
                    NULL
                  <% } else { %>
                    <%= stat._id %>
                  <% }; %>
                </td>
                <td><%= stat.movies %></td>
                <td><%= stat.avg_rating.toFixed(2) %></td>
                <td><%= stat.avg_budget.toFixed(2) %></td>
                <td><%= stat.avg_revenue.toFixed(2) %></td>
              </tr>
            <% }); %>
          </table>
        </div>
    </main>

    <footer>
        <% include ../partials/footer %>
    </footer>

</body>
</html>
